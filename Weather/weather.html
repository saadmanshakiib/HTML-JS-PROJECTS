<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weather App</title>
  <link rel="stylesheet" href="weather.css">
</head>
<body>
  <div class="card">

    <div class="search">
      <input id="cityInput" type="text" placeholder="City Name" spellcheck="false">

      <button id="searchBtn">
        <img src="search.png" alt="Search">
      </button>

    </div>

    <div class="weather">
      <img src="weatherIcon.png" class="weatherIcon" alt="Icon">
      <h1 class="temp">--°C</h1>
      <h2 class="city">—</h2>

      <div class="details">
        <div class="col">
          <div>
            <p class="humidity">—%</p>
            <p>Humidity</p>
          </div>
        </div>
        <div class="col">
          <p class="wind">— km/h</p>
          <p>Wind Speed</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    const apiKey = "54a341559b64b1a2dec4a29a7c4fc931";

    async function checkWeather(city) {
      const url = `https://api.openweathermap.org/data/2.5/weather`
                + `?units=metric&q=${encodeURIComponent(city)}`
                + `&appid=${apiKey}`;

      try{
        const res = await fetch(url);
        if(!res.ok){
            throw new Error("City Not Found");
        }

        const data = await res.json();
        document.querySelector('.city').innerHTML = data.name;
        document.querySelector('.temp').innerHTML = Math.round(data.main.temp) + "°C";
        document.querySelector('.humidity').innerHTML = data.main.humidity + "%";
        document.querySelector('.wind').innerHTML = data.wind.speed + "km/h";
      } 
      catch(error){
        alert(error.message);
      }
    }

    const searchBox    = document.getElementById('cityInput');
    const searchButton = document.getElementById('searchBtn');

    searchButton.addEventListener('click', () => {
      const city = searchBox.value.trim();
      if (city) checkWeather(city);
    });

  </script>
</body>
</html>
